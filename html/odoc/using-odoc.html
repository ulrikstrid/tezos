<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>using-odoc (odoc.using-odoc)</title><link rel="stylesheet" href="../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0-beta3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="index.html">Up</a> â€“ <a href="index.html">odoc</a> &#x00BB; using-odoc</nav><header class="odoc-preamble"><h1 id="top"><a href="#top" class="anchor"></a>Using <code>odoc</code></h1><p>This manual describes the features that are available and recommended for users to write great documentation using <code>odoc</code>.</p><ol><li><a href="#cookbook">Cookbook</a></li><li><a href="#interfaces">Documenting your interfaces</a></li><li><a href="#doc-pages">Writing documentation pages</a></li><li><a href="#examples">Examples of great <code>odoc</code> usage</a></li></ol></header><nav class="odoc-toc"><ul><li><a href="#cookbook">Cookbook</a><ul><li><a href="#sections-and-headings">Sections and headings</a></li></ul></li><li><a href="#interfaces">Documenting your interfaces</a><ul><li><a href="#comments">Comments</a></li><li><a href="#top-comment">Top-comment</a></li><li><a href="#preamble">Preamble</a></li><li><a href="#synopsis">Synopsis</a></li></ul></li><li><a href="#doc-pages">Writing documentation pages</a><ul><li><a href="#markup">Markup</a></li><li><a href="#page-title">Page title</a></li><li><a href="#usage">Usage</a></li><li><a href="#referencing-pages">Referencing pages</a></li><li><a href="#manual-usage">Manual usage</a></li></ul></li><li><a href="#examples">Examples of great <code>odoc</code> usage</a></li></ul></nav><div class="odoc-content"><h2 id="cookbook"><a href="#cookbook" class="anchor"></a>Cookbook</h2><h3 id="sections-and-headings"><a href="#sections-and-headings" class="anchor"></a>Sections and headings</h3><p>Both API references and documentation pages can be split into sections that can be introduced with level-1 headings. Each section can also have subsections (level-2) and subsubsections (level-3).</p><p>Additionally paragraphs can be annotated with level-4 or level-5 headings. Note that paragraph headings are <em>not</em> be included in the generated table of contents and thus should be used to introduce examples, comments or other complementary notes.</p><h2 id="interfaces"><a href="#interfaces" class="anchor"></a>Documenting your interfaces</h2><p>Odoc is built to produce documentation for your <em>libraries</em>, and the unit of organisation is the <em>module</em>. Documentation is written by putting special <a href="#comments">comments</a> into the source of the <em>module</em> or <em>module interface</em>, and correctly placing these is critical to producing good output. Odoc expects the documentation to be structured in a logical way, and will work best if the following conventions are applied.</p><p>The overall structure is that modules start with a <a href="#preamble">preamble</a> or 'Lead Section' that serves as an overview of the most important information about module. This is followed by the content of the module, organised into <em>sections</em> and <em>subsections</em>, the structure of which will be used to populate a <em>table of contents</em> which will be structurally placed immediately after the preamble.</p><p>The first paragraph of the preamble will be treated as the module <a href="#synopsis">synopsis</a>, and will be used as a short description of the module when it appears in a list of modules elsewhere in the documentation of the library.</p><h3 id="comments"><a href="#comments" class="anchor"></a>Comments</h3><p>Documentation comments are delimited with <code>(** </code> (exactly two <code>*</code>) and <code>*)</code> and can be attached to a declaration or be floating in a signature. <a href="https://caml.inria.fr/pub/docs/manual-ocaml/doccomments.html">This is defined by OCaml.</a> It is also possible to attach documentation comments to individual record fields, constructors, function arguments, class items, etc..</p><pre><code>(** This is the top-comment. It documents the whole module and will be used to
    derive the preamble and the synopsis. *)

type t
(** This comment is attached to [t]. *)

(** This comment is &quot;floating&quot;, it can be used to define sections.

    {1 This is a heading} *)

(* ... *)</code></pre><p>The documentation can be formatted, Odoc accepts the same markup language as <a href="https://caml.inria.fr/pub/docs/manual-ocaml/ocamldoc.html#s%3Aocamldoc-comments">ocamldoc</a> with some exceptions, see <code>interface</code>.Changes.</p><h3 id="top-comment"><a href="#top-comment" class="anchor"></a>Top-comment</h3><p>The top-comment is the first item of a signature, if it is a documentation comment. For example, in an <code>.mli</code> file:</p><pre><code>(** This is the top-comment of the current module. *)

module M : sig
  (** This is the top-comment of [M]. *)

  (* ... *)
end

module type T = sig
  (** This is the top-comment of [T]. *)

  (* ... *)
end

class c =
  object
    (** This is the top-comment of [c]. *)

    (* ... *)
  end</code></pre><p>As an exception, <code>open</code> items are allowed to be placed before the top-comment. For example:</p><pre><code>(* Copyright header *)

open Base

(** This is the top-comment *)

(* ... *)</code></pre><p>Note that the top-comment can't be attached to a declaration, for example:</p><pre><code>(** This is {e not} the top-comment because it's attached to [t]. *)
type t</code></pre><h3 id="preamble"><a href="#preamble" class="anchor"></a>Preamble</h3><p>The preamble is composed of the comment attached to a declaration and the top-comment of the corresponding signature, if there is one. It is special only because it will be placed in the <code>header</code> part of the page, just before the TOC (if any), and is used to compute the <em>synopsis</em>.</p><pre><code>(** This is the comment attached to the declaration. This paragraph will be the
    first of the preamble. *)
module M : sig
  (** This is the top-comment of the expansion. This paragraph will be the
      second of the preamble. *)

  (* ... *)
end</code></pre><p>The preamble stops at the first heading, the rest is moved into the <code>content</code> part of the page. For example, the next two snippets will <em>render</em> the same way:</p><pre><code>module M : sig
  (** Preamble.

      {1 Heading}

      This paragraph is not part of the preamble. *)
end</code></pre><pre><code>module M : sig
  (** Preamble. *)

  (** {1 Heading}

      This paragraph is not part of the preamble. *)
end</code></pre><p>Note: A comment attached to a declaration shouldn't contain any heading.</p><h3 id="synopsis"><a href="#synopsis" class="anchor"></a>Synopsis</h3><p>The synopsis of a module (a module type, a class, etc..) is the first paragraph of the <a href="#preamble">Preamble</a>, <em>if</em> the preamble starts with a paragraph.</p><p>It is rendered after the corresponding declaration and in <code>{!modules:...}</code> lists.</p><p>Note that the synopsis is computed on top of the <em>preamble</em>, in these two examples, the synopsis is the same:</p><pre><code>(** This paragraph is the synopsis of the module [M].

    This paragraph is no longer the synopsis and won't be rendered in the
    current page near the declaration of [M]. This paragraph will be part of
    [M]'s preamble. *)
module M : sig
  (* ... *)
end</code></pre><pre><code>module M : sig
  (** This paragraph is the synopsis of the module [M]. *)

  (* ... *)
end</code></pre><h2 id="doc-pages"><a href="#doc-pages" class="anchor"></a>Writing documentation pages</h2><p>Files with the <code>.mld</code> extension are called <em>documentation pages</em> and should be used to complement API references with tutorials or guides. They are particularly suitable for OCaml and Reason because cross-references to definitions, both in the current package and for external packages, are supported.</p><h3 id="markup"><a href="#markup" class="anchor"></a>Markup</h3><p>Similarly to interface files, the familiar <a href="https://caml.inria.fr/pub/docs/manual-ocaml/ocamldoc.html#sec351">ocamldoc</a> syntax can be used in pages. A documentation page can be seen as a single regular docstring in a separate file.</p><h3 id="page-title"><a href="#page-title" class="anchor"></a>Page title</h3><p>When defining a documentation page make sure to supply a page title as one is not generated by default (unlike for API reference documents where the module or module type name is used). The level-0 heading must be used for that purpose. For example:</p><pre><code>{0 My page}
...</code></pre><p>Only one title is allowed per page, the following heading levels should be in the range from 1 to 5 (inclusive). Don't worry, <code>odoc</code> will generate a warning if you forget accidentally include multiple titles.</p><h3 id="usage"><a href="#usage" class="anchor"></a>Usage</h3><p>The recommended way to setup documentation pages for your project is by using the Dune build system. It will automatically find and generate HTML for all <code>mld</code> files in your project. See <a href="https://jbuilder.readthedocs.io/en/latest/documentation.html#documentation-stanza">Dune's configuration instructions</a> for more details.</p><h3 id="referencing-pages"><a href="#referencing-pages" class="anchor"></a>Referencing pages</h3><p>Currently the generated HTML pages are not be automatically referenced in the index page, you must manually add links to point to the pages in your document.</p><p>For example, if you have a page called <code>my_page.mld</code>, you can create a link to it with <code>{{!page-my_page}My page}</code> in your <code>index.mld</code> or anywhere else in your documentation.</p><h3 id="manual-usage"><a href="#manual-usage" class="anchor"></a>Manual usage</h3><p>Generic <code>odoc</code> build instructions apply to documentation pages. You can compile <code>mld</code> files manually with <code>odoc compile</code> (this is described in details in <a href="system-integrations.html#manual-usage">Invoking <code>odoc</code> manually</a>).</p><h2 id="examples"><a href="#examples" class="anchor"></a>Examples of great <code>odoc</code> usage</h2><p>...</p></div></body></html>